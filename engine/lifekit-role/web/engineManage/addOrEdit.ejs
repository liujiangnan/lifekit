<% include ../commonejs/common.ejs%>
  <% include ../commonejs/alertModal.ejs%>

  <style>
    .authtxt{ 
      display: none;
    }  
  </style>

    <div id="cloneContaner" style="display:none;">
      <input name="cloneInput" class="form-control" type="text" />
			<table>
				<tr class="authRow">
					<td><input type="checkbox" value="" /></td>
					<td name="codeTd"></td>
					<td name="nameTd"></td>
					<td name="descTd"></td>
				</tr>
			</table> 
    </div>

    <%
      function nullFile(obj,key){
        return obj?obj.get(key):"";
      }
    %>

    <div class="container-fluid" style="padding-top:20px;">
      <div class="panel panel-default">
        <div class="panel-body" style="padding-top: 40px;">
          <form id="engineform" action="" class="form-horizontal" onSubmit="return false;">
            <input type="hidden" id="id"  name="id" value="<%=nullFile(engine,"id")%>" />
            <div class="form-group">
              <label class="col-sm-2 control-label">模块名称:</label>
              <div class="col-sm-10">
                <input id="name" name="name" class="form-control" type="text" placeholder="请输入模块名称" value="<%=nullFile(engine,"name")%>" />
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-2 control-label">模块地址:</label>
              <div class="col-sm-10">
                <input id="url" name="url" class="form-control" type="text" placeholder="请输入URL" value="<%=nullFile(engine,"url")%>" />
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-2 control-label">描述:</label>
              <div class="col-sm-10">
                <textarea id="description" name="description" class="form-control" rows="3" placeholder="请输入描述" ><%=nullFile(engine,"description")%></textarea>
              </div>
            </div>
            <div class="form-group" style="padding-left: 5px;padding-right: 5px;">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <span style="font-weight: 700">模块权限</span>
                  <button id="addAuth" type="button" class="btn btn-default"> 
										<span  class="glyphicon glyphicon-plus"></span>
									</button>
                  <button id="delAuth" type="button" class="btn btn-default"> 
										<span  class="glyphicon glyphicon-minus"></span>
									</button>
                </div>
                <table class="table table-bordered table-hover">
                  <tr>
                    <th style="width:10%">选择</th>
                    <th style="width:20%">编码</th>
                    <th style="width:20%">名称</th>
                    <th style="width:50%">描述</th>
                  </tr>
                  <%
                    if(auths&&auths.length>0){
                    for(let i=0;i<auths.length;i++){
                      let auth = auths[i];
                  %>
                  <tr> 
                    <td><input type="checkbox" value="" /></td>
                    <td name="codeTd"><%=auth.get("code")%></td>
                    <td name="nameTd"><%=auth.get("name")%></td>
                    <td name="descTd"><%=auth.get("description")%></td>
                  </tr>
                  <%}}%>
                </table>
              </div>
            </div>
            <div class="form-group">
              <div class="text-center">
                <button id="saveEngine" type="button" class="btn btn-default">保存</button>
                <button id="cancle" type="button" class="btn btn-default">取消</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="/lifekit-role/web/engineManage/addOrEdit.js"></script>